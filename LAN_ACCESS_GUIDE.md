# 局域网访问指南

## 📋 快速步骤

### 1️⃣ 启动服务

运行启动脚本：
```bash
./start.sh
```

启动后，脚本会自动显示你的局域网IP地址，例如：
```
🌐 局域网访问地址（供同事访问）:
   ✨ 新版聊天界面: http://172.16.10.114:8000/chat (或 http://172.16.10.114:8000/app)
   📜 经典聊天界面: http://172.16.10.114:8000/classic
```

### 2️⃣ 检查防火墙设置（macOS）

如果你的同事无法访问，可能需要允许防火墙访问：

**方法一：通过系统设置**
1. 打开"系统设置"（System Settings）
2. 进入"网络" → "防火墙"
3. 点击"选项..."按钮
4. 确保"阻止所有传入连接"未勾选
5. 或者在"防火墙选项"中添加 Python/uvicorn 到允许列表

**方法二：通过终端临时允许端口**
```bash
# 允许 8000 端口通过防火墙（需要管理员权限）
sudo /usr/libexec/ApplicationFirewall/socketfilterfw --add /usr/local/bin/python3
sudo /usr/libexec/ApplicationFirewall/socketfilterfw --add $(which uvicorn)
```

### 3️⃣ 告诉同事访问地址

将启动脚本显示的局域网IP地址发送给同事，例如：
- 你的IP: `172.16.10.114`
- 同事访问新版界面: `http://172.16.10.114:8000/chat` (或 `http://172.16.10.114:8000/app`)
- 同事访问经典界面: `http://172.16.10.114:8000/classic`

### 4️⃣ 验证连接

在同事的电脑上：
1. 确保连接到同一个WiFi网络
2. 在浏览器访问：`http://[你的IP地址]:8000/chat` (新版) 或 `http://[你的IP地址]:8000/classic` (经典版)
3. 如果能打开页面，说明配置成功！

---

## 🔍 如何查找你的IP地址

如果启动脚本没有显示IP，可以手动查找：

**macOS/Linux:**
```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
```

**Windows:**
```bash
ipconfig
```
查找"IPv4 地址"，通常类似 `192.168.x.x` 或 `10.x.x.x`

---

## ⚠️ 常见问题

### 问题1：同事无法访问

**可能原因：**
- 防火墙阻止了连接
- 不在同一个WiFi网络
- IP地址错误

**解决方案：**
1. 检查防火墙设置（见上面步骤2）
2. 确认都在同一个WiFi网络
3. 重新获取IP地址并确认

### 问题2：提示"连接被拒绝"

**可能原因：**
- 服务没有正常启动
- 端口被占用

**解决方案：**
```bash
# 检查服务是否运行
lsof -i :8000

# 如果端口被占用，停止其他服务或更换端口
```

### 问题3：能访问但页面加载很慢

**可能原因：**
- WiFi网络速度较慢
- 服务器性能限制

**解决方案：**
- 这是正常现象，本地开发环境的网络延迟比生产环境高
- 可以考虑部署到云服务器以获得更好的性能

---

## 📝 注意事项

1. **安全性**: 仅在同一WiFi网络下的同事可以访问，相对安全
2. **性能**: 本地开发服务器的性能受你的电脑性能影响
3. **稳定性**: 如果你关闭电脑或断开WiFi，同事将无法访问
4. **IP变化**: 如果重新连接WiFi，IP地址可能会变化，需要重新告知同事

---

## 🚀 生产环境部署

如果需要在公司内部长期稳定访问，建议：
- 部署到公司内部服务器
- 配置固定的内网IP地址
- 使用域名访问（如：http://vanna-demo.company.com）

